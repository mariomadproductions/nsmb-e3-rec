#pragma once

#include "nitro_if.h"


namespace End {

	using CharT = u8;


	namespace Script {

		// 0202A4CC
		extern const CharT* s0;
		// 0202A760
		extern const CharT* s1;
		// 0202A58C
		extern const CharT* s2;
		// 0202A2BC
		extern const CharT* s3;
		// 0202A63C
		extern const CharT* s4;
		// 0202A2B0
		extern const CharT* s5;
		// 0202A64C
		extern const CharT* s6;
		// 0202A990
		extern const CharT* s7;
		// 0202A88C
		extern const CharT* s8;
		// 0202A3A0
		extern const CharT* s9;
		// 0202A92C
		extern const CharT* s10;
		// 0202A878
		extern const CharT* s11;
		// 0202A8A0
		extern const CharT* s12;
		// 0202A940
		extern const CharT* s13;
		// 0202A42C
		extern const CharT* s14;
		// 0202A5EC
		extern const CharT* s15;
		// 0202A67C
		extern const CharT* s16;
		// 0202A66C
		extern const CharT* s17;
		// 0202A68C
		extern const CharT* s18;
		// 0202A7B0
		extern const CharT* s19;
		// 0202A788
		extern const CharT* s20;
		// 0202A44C
		extern const CharT* s21;
		// 0202A79C
		extern const CharT* s22;
		// 0202A69C
		extern const CharT* s23;
		// 0202A40C
		extern const CharT* s24;
		// 0202A5AC
		extern const CharT* s25;
		// 0202A4AC
		extern const CharT* s26;
		// 0202A6AC
		extern const CharT* s27;
		// 0202A4DC
		extern const CharT* s28;
		// 0202A5CC
		extern const CharT* s29;
		// 0202A2EC
		extern const CharT* s30;
		// 0202A3CC
		extern const CharT* s31;
		// 0202A8DC
		extern const CharT* s32;
		// 0202A4FC
		extern const CharT* s33;
		// 0202A46C
		extern const CharT* s34;
		// 0202A50C
		extern const CharT* s35;
		// 0202A388
		extern const CharT* s36;
		// 0202A7C4
		extern const CharT* s37;
		// 0202A5DC
		extern const CharT* s38;
		// 0202A48C
		extern const CharT* s39;
		// 0202A6D4
		extern const CharT* s40;
		// 0202A9B8
		extern const CharT* s41;
		// 0202A6E8
		extern const CharT* s42;
		// 0202A6FC
		extern const CharT* s43;
		// 0202A7EC
		extern const CharT* s44;
		// 0202A2E0
		extern const CharT* s45;
		// 0202A8F0
		extern const CharT* s46;
		// 0202A5FC
		extern const CharT* s47;
		// 0202A800
		extern const CharT* s48;
		// 0202A45C
		extern const CharT* s49;
		// 0202A814
		extern const CharT* s50;
		// 0202A710
		extern const CharT* s51;
		// 0202A47C
		extern const CharT* s52;
		// 0202A724
		extern const CharT* s53;
		// 0202A828
		extern const CharT* s54;
		// 0202A83C
		extern const CharT* s55;
		// 0202A60C
		extern const CharT* s56;
		// 0202A370
		extern const CharT* s57;
		// 0202A31C
		extern const CharT* s58;
		// 0202A850
		extern const CharT* s59;
		// 0202A864
		extern const CharT* s60;
		// 0202A738
		extern const CharT* s61;
		// 0202A37C
		extern const CharT* s62;
		// 0202A54C
		extern const CharT* s63;
		// 0202A61C
		extern const CharT* s64;
		// 0202A49C
		extern const CharT* s65;
		// 0202A904
		extern const CharT* s66;
		// 0202A55C
		extern const CharT* s67;
		// 0202A968
		extern const CharT* s68;
		// 0202A62C
		extern const CharT* s69;
		// 0202A4BC
		extern const CharT* s70;
		// 0202A57C
		extern const CharT* s71;
		// 0202A328
		extern const CharT* s72;
		// 0202A290
		extern const CharT* s73;
		// 0202A2D4
		extern const CharT* s74;
		// 0202A3FC
		extern const CharT* s75;
		// 0202A7D8
		extern const CharT* s76;
		// 0202A43C
		extern const CharT* s77;
		// 0202A298
		extern const CharT* s78;
		// 0202A774
		extern const CharT* s79;
		// 0202A97C
		extern const CharT* s80;
		// 0202A56C
		extern const CharT* s81;
		// 0202A65C
		extern const CharT* s82;
		// 0202A310
		extern const CharT* s83;
		// 0202A41C
		extern const CharT* s84;
		// 0202A2C8
		extern const CharT* s85;
		// 0202A8B4
		extern const CharT* s86;
		// 0202A9A4
		extern const CharT* s87;
		// 0202A340
		extern const CharT* s88;
		// 0202A8C8
		extern const CharT* s89;
		// 0202A5BC
		extern const CharT* s90;
		// 0202A59C
		extern const CharT* s91;
		// 0202A2A0
		extern const CharT* s92;
		// 0202A4EC
		extern const CharT* s93;
		// 0202A954
		extern const CharT* s94;
		// 0202A2F8
		extern const CharT* s95;
		// 0202A6C0
		extern const CharT* s96;
		// 0202A9D0
		extern const CharT* s97;
		// 0202A394
		extern const CharT* s98;
		// 0202A358
		extern const CharT* s99;
		// 0202A34C
		extern const CharT* s100;
		// 0202A51C
		extern const CharT* s101;
		// 0202A52C
		extern const CharT* s102;
		// 0202A3AC
		extern const CharT* s103;
		// 0202A3BC
		extern const CharT* s104;
		// 0202A364
		extern const CharT* s105;
		// 0202A53C
		extern const CharT* s106;
		// 0202A28C
		extern const CharT* s107;
		// 0202A304
		extern const CharT* s108;
		// 0202A3DC
		extern const CharT* s109;
		// 0202A334
		extern const CharT* s110;
		// 0202A74C
		extern const CharT* s111;
		// 0202A918
		extern const CharT* s112;
		// 0202A3EC
		extern const CharT* s113;

	}


	constexpr CharT charConv(wchar_t c) {
		switch (c) {
			case L'A':	return 0x0;
			case L'B':	return 0x1;
			case L'C':	return 0x2;
			case L'D':	return 0x3;
			case L'E':	return 0x4;
			case L'F':	return 0x5;
			case L'G':	return 0x6;
			case L'H':	return 0x7;
			case L'I':	return 0x8;
			case L'J':	return 0x9;
			case L'K':	return 0xA;
			case L'L':	return 0xB;
			case L'M':	return 0xC;
			case L'N':	return 0xD;
			case L'O':	return 0xE;
			case L'P':	return 0xF;
			case L'Q':	return 0x10;
			case L'R':	return 0x11;
			case L'S':	return 0x12;
			case L'T':	return 0x13;
			case L'U':	return 0x14;
			case L'V':	return 0x15;
			case L'W':	return 0x16;
			case L'X':	return 0x17;
			case L'Y':	return 0x18;
			case L'Z':	return 0x19;
			case L'a':	return 0x1A;
			case L'b':	return 0x1B;
			case L'c':	return 0x1C;
			case L'd':	return 0x1D;
			case L'e':	return 0x1E;
			case L'f':	return 0x1F;
			case L'g':	return 0x20;
			case L'h':	return 0x21;
			case L'i':	return 0x22;
			case L'j':	return 0x23;
			case L'k':	return 0x24;
			case L'l':	return 0x25;
			case L'm':	return 0x26;
			case L'n':	return 0x27;
			case L'o':	return 0x28;
			case L'p':	return 0x29;
			case L'q':	return 0x2A;
			case L'r':	return 0x2B;
			case L's':	return 0x2C;
			case L't':	return 0x2D;
			case L'u':	return 0x2E;
			case L'v':	return 0x2F;
			case L'w':	return 0x30;
			case L'x':	return 0x31;
			case L'y':	return 0x32;
			case L'z':	return 0x33;
			case L'À':	return 0x34;
			case L'Á':	return 0x35;
			case L'Â':	return 0x36;
			case L'Ä':	return 0x37;
			case L'Ç':	return 0x38;
			case L'È':	return 0x39;
			case L'É':	return 0x3A;
			case L'Ê':	return 0x3B;
			case L'Ë':	return 0x3C;
			case L'Ì':	return 0x3D;
			case L'Í':	return 0x3E;
			case L'Î':	return 0x3F;
			case L'Ï':	return 0x40;
			case L'Ñ':	return 0x41;
			case L'Ò':	return 0x42;
			case L'Ó':	return 0x43;
			case L'Ô':	return 0x44;
			case L'Ö':	return 0x45;
			case L'Ù':	return 0x46;
			case L'Ú':	return 0x47;
			case L'Û':	return 0x48;
			case L'Ü':	return 0x49;
			case L'ß':	return 0x4A;
			case L'à':	return 0x4B;
			case L'á':	return 0x4C;
			case L'â':	return 0x4D;
			case L'ä':	return 0x4E;
			case L'ç':	return 0x4F;
			case L'è':	return 0x50;
			case L'é':	return 0x51;
			case L'ê':	return 0x52;
			case L'ë':	return 0x53;
			case L'ì':	return 0x54;
			case L'í':	return 0x55;
			case L'î':	return 0x56;
			case L'ï':	return 0x57;
			case L'ñ':	return 0x58;
			case L'ò':	return 0x59;
			case L'ó':	return 0x5A;
			case L'ô':	return 0x5B;
			case L'ö':	return 0x5C;
			case L'ù':	return 0x5D;
			case L'ú':	return 0x5E;
			case L'û':	return 0x5F;
			case L'ü':	return 0x60;
			case L'.':	return 0x61;
			case L'•':	return 0x62; // Assumed
			case L'_':	return 0x63; // Assumed
			case L'-':	return 0x64; // Assumed
			case L'‾':	return 0x65; // Assumed
			case L'&':	return 0x66;
			case L'\'': return 0x67;
			case L' ':	return 0x68;
			case L'\0':	return 0x69;
		}
	}

	constexpr wchar_t indexConv(CharT index) {
		switch (index) {
			case 0x00: return L'A';
			case 0x01: return L'B';
			case 0x02: return L'C';
			case 0x03: return L'D';
			case 0x04: return L'E';
			case 0x05: return L'F';
			case 0x06: return L'G';
			case 0x07: return L'H';
			case 0x08: return L'I';
			case 0x09: return L'J';
			case 0x0a: return L'K';
			case 0x0b: return L'L';
			case 0x0c: return L'M';
			case 0x0d: return L'N';
			case 0x0e: return L'O';
			case 0x0f: return L'P';
			case 0x10: return L'Q';
			case 0x11: return L'R';
			case 0x12: return L'S';
			case 0x13: return L'T';
			case 0x14: return L'U';
			case 0x15: return L'V';
			case 0x16: return L'W';
			case 0x17: return L'X';
			case 0x18: return L'Y';
			case 0x19: return L'Z';
			case 0x1a: return L'a';
			case 0x1b: return L'b';
			case 0x1c: return L'c';
			case 0x1d: return L'd';
			case 0x1e: return L'e';
			case 0x1f: return L'f';
			case 0x20: return L'g';
			case 0x21: return L'h';
			case 0x22: return L'i';
			case 0x23: return L'j';
			case 0x24: return L'k';
			case 0x25: return L'l';
			case 0x26: return L'm';
			case 0x27: return L'n';
			case 0x28: return L'o';
			case 0x29: return L'p';
			case 0x2a: return L'q';
			case 0x2b: return L'r';
			case 0x2c: return L's';
			case 0x2d: return L't';
			case 0x2e: return L'u';
			case 0x2f: return L'v';
			case 0x30: return L'w';
			case 0x31: return L'x';
			case 0x32: return L'y';
			case 0x33: return L'z';
			case 0x34: return L'À';
			case 0x35: return L'Á';
			case 0x36: return L'Â';
			case 0x37: return L'Ä';
			case 0x38: return L'Ç';
			case 0x39: return L'È';
			case 0x3a: return L'É';
			case 0x3b: return L'Ê';
			case 0x3c: return L'Ë';
			case 0x3d: return L'Ì';
			case 0x3e: return L'Í';
			case 0x3f: return L'Î';
			case 0x40: return L'Ï';
			case 0x41: return L'Ñ';
			case 0x42: return L'Ò';
			case 0x43: return L'Ó';
			case 0x44: return L'Ô';
			case 0x45: return L'Ö';
			case 0x46: return L'Ù';
			case 0x47: return L'Ú';
			case 0x48: return L'Û';
			case 0x49: return L'Ü';
			case 0x4a: return L'ß';
			case 0x4b: return L'à';
			case 0x4c: return L'á';
			case 0x4d: return L'â';
			case 0x4e: return L'ä';
			case 0x4f: return L'ç';
			case 0x50: return L'è';
			case 0x51: return L'é';
			case 0x52: return L'ê';
			case 0x53: return L'ë';
			case 0x54: return L'ì';
			case 0x55: return L'í';
			case 0x56: return L'î';
			case 0x57: return L'ï';
			case 0x58: return L'ñ';
			case 0x59: return L'ò';
			case 0x5a: return L'ó';
			case 0x5b: return L'ô';
			case 0x5c: return L'ö';
			case 0x5d: return L'ù';
			case 0x5e: return L'ú';
			case 0x5f: return L'û';
			case 0x60: return L'ü';
			case 0x61: return L'.';
			case 0x62: return L'•'; // Assumed
			case 0x63: return L'_'; // Assumed
			case 0x64: return L'-'; // Assumed
			case 0x65: return L'‾'; // Assumed
			case 0x66: return L'&';
			case 0x67: return L'\'';
			case 0x68: return L' ';
			case 0x69: return L'\0';
		}
	}

	template<size_t N>
	class StringHelper {

	public:

		static constexpr size_t Size = N;

		template<class T> requires(std::is_convertible_v<T, wchar_t>)
		consteval StringHelper(const T (&str)[N]) {
			for (size_t i = 0; i < N; i++) {
				data[i] = charConv(str[i]);
			}
		}

		consteval operator const CharT*() const {
			return data;
		}

		CharT data[N];

	};


	struct ScriptEntry {

		enum Palette {
			Red = 0,
			Blue = 8
		};

		const CharT* string;
		u8 page;
		u8 posY;
		u8 palette;
		bool multipage;
	};

	static constexpr ScriptEntry scriptTerminator = {nullptr, 0, 0, 0, false};

	// 020EA678
	extern const ScriptEntry script[115];

}


GCC_PUSH
GCC_IGNORE("-Wliteral-suffix")

consteval End::CharT operator""end(char c) {
	return End::charConv(c);
}

consteval End::CharT operator""end(wchar_t c) {
	return End::charConv(c);
}

#ifdef __INTELLISENSE__ // Intellisense does not support templated literal operators

consteval const End::CharT* operator""end(const char* str, size_t size) {
	return {};
}

consteval const End::CharT* operator""end(const wchar_t* str, size_t size) {
	return {};
}

#else // Actual implementation

template<End::StringHelper Str>
consteval const End::CharT* operator""end() {
	return Str;
}

#endif

GCC_POP
